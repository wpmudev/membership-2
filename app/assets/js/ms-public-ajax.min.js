/*! Membership 2 Pro - v1.0.28-Beta-4
 * https://premium.wpmudev.org/project/membership/
 * Copyright (c) 2016; * Licensed GPLv2+ */
jQuery(function(){function e(){var e=!1;s.is(":visible")?e=s:r.is(":visible")&&(e=r),e&&e.find("input.focus").focus()}function t(e){e.addClass("progress"),e.find("input, textarea, select, button").each(function(){jQuery(this).data("ms-disabled",jQuery(this).prop("disabled")),jQuery(this).prop("disabled",!0).addClass("disabled")})}function i(e){e.removeClass("progress").prop("disabled",!1),e.find("input, textarea, select, button").each(function(){jQuery(this).data("ms-disabled")||jQuery(this).prop("disabled",!1).removeClass("disabled")})}function a(e,t){void 0!==t.error?e.addClass("error").text(t.error):void 0!==t.success&&e.removeClass("error").text(t.success)}var n=window.ms_ajax_login,s=jQuery('form[action="login"]'),r=jQuery('form[action="lostpassword"]'),o=s.find(".status"),d=r.find(".status"),u=jQuery("a.login","form"),l=jQuery("a.lost","form");l.on("click",function(){s.hide(),r.show(),d.removeClass("error").text(""),e()}),u.on("click",function(){r.hide(),s.show(),o.removeClass("error").text(""),e()}),s.on("submit",function(e){var s,r={},d=jQuery(this),u=d.serializeArray(),l=d.find('input[name="redirect_to"]');o.removeClass("error").show().text(n.loadingmessage),t(d);for(s in u)u.hasOwnProperty(s)&&(r[u[s].name]=u[s].value);return r.action="ms_login",jQuery.ajax({type:"POST",dataType:"json",url:n.ajaxurl+"?ms_ajax=1",data:r,success:function(e){i(d),a(o,e),e.loggedin&&(document.location.href=void 0!==e.redirect&&e.redirect.length>5?e.redirect:l.val())},error:function(){var e={error:n.errormessage};i(d),a(o,e)}}),e.preventDefault(),!1}),r.on("submit",function(e){var s,o={},u=r.serializeArray();d.removeClass("error").show().text(n.loadingmessage),t(r);for(s in u)u.hasOwnProperty(s)&&(o[u[s].name]=u[s].value);return o.action="ms_lostpass",jQuery.ajax({type:"POST",dataType:"json",url:n.ajaxurl,data:o,success:function(e){i(r),a(d,e)},error:function(){var e={error:n.errormessage};i(r),a(d,e)}}),e.preventDefault(),!1}),s.hasClass("autofocus")&&e()});