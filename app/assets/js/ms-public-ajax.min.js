/*! Membership 2 Pro - v1.0.4
 * https://premium.wpmudev.org/project/membership/
 * Copyright (c) 2017; * Licensed GPLv2+ */

jQuery(function(){function a(){var a=!1;f.is(":visible")?a=f:g.is(":visible")&&(a=g),a&&a.find("input.focus").focus()}function b(a){a.addClass("progress"),a.find("input, textarea, select, button").each(function(){jQuery(this).data("ms-disabled",jQuery(this).prop("disabled")),jQuery(this).prop("disabled",!0).addClass("disabled")})}function c(a){a.removeClass("progress").prop("disabled",!1),a.find("input, textarea, select, button").each(function(){jQuery(this).data("ms-disabled")||jQuery(this).prop("disabled",!1).removeClass("disabled")})}function d(a,b){void 0!==b.error?a.addClass("error").text(b.error):void 0!==b.success&&a.removeClass("error").text(b.success)}var e=window.ms_ajax_login,f=jQuery('form[action="login"]'),g=jQuery('form[action="lostpassword"]'),h=f.find(".status"),i=g.find(".status"),j=jQuery("a.login","form");jQuery("a.lost","form").on("click",function(){f.hide(),g.show(),jQuery(".ms-auth-header").html(e.resetmessage),i.removeClass("error").text(""),a()}),j.on("click",function(){g.hide(),f.show(),jQuery(".ms-auth-header").html(e.loginmessage),h.removeClass("error").text(""),a()}),f.on("submit",function(a){var f,g={},i=jQuery(this),j=i.serializeArray(),k=i.find('input[name="redirect_to"]');h.removeClass("error").show().text(e.loadingmessage),b(i);for(f in j)j.hasOwnProperty(f)&&(g[j[f].name]=j[f].value);return g.action="ms_login",jQuery.ajax({type:"POST",dataType:"json",url:e.ajaxurl+"?ms_ajax=1",data:g,success:function(a){c(i),d(h,a),a.loggedin&&(void 0!==a.redirect&&a.redirect.length>5?document.location.href=a.redirect:document.location.href=k.val())},error:function(){var a={error:e.errormessage};c(i),d(h,a)}}),a.preventDefault(),!1}),g.on("submit",function(a){var f,h={},j=g.serializeArray();i.removeClass("error").show().text(e.loadingmessage),b(g);for(f in j)j.hasOwnProperty(f)&&(h[j[f].name]=j[f].value);return h.action="ms_lostpass",jQuery.ajax({type:"POST",dataType:"json",url:e.ajaxurl,data:h,success:function(a){c(g),d(i,a)},error:function(){var a={error:e.errormessage};c(g),d(i,a)}}),a.preventDefault(),!1}),f.hasClass("autofocus")&&a()});